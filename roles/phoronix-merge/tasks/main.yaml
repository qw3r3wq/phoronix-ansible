---
- name: Find /var/lib/phoronix-test-suite/test-results/ all directories
  find:
    paths: /var/lib/phoronix-test-suite/test-results
    recurse: no
    file_type: directory
  register: dir_list
#- debug: var=dir_list

- name: /var/lib/phoronix-test-suite/test-results/*/composite.xml in PhoronixTestSuite/System/Identifier
  xml:
    path: '{{ item.path }}/composite.xml'
    xpath: /PhoronixTestSuite/System/Identifier
    value: '{{ ansible_hostname }} {{ item.path|basename }}'
  loop: '{{ dir_list.files }}'
- name: /var/lib/phoronix-test-suite/test-results/*/composite.xml in PhoronixTestSuite/Result/Data/Entry/Identifier
  xml:
    path: '{{ item.path }}/composite.xml'
    xpath: /PhoronixTestSuite/Result/Data/Entry/Identifier
    value: '{{ ansible_hostname }} {{ item.path|basename }}'
  loop: '{{ dir_list.files }}'
